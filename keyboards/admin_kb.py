"""
–ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

–°–æ–¥–µ—Ä–∂–∏—Ç inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è:
- –ì–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –∞–¥–º–∏–Ω–∫–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –†–∞—Å—Å—ã–ª–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
"""

from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton


def get_admin_main_menu() -> InlineKeyboardMarkup:
    """–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏."""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è",
            callback_data="admin_stats"
        )],
        [InlineKeyboardButton(
            text="üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏",
            callback_data="admin_users"
        )],
        [InlineKeyboardButton(
            text="‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç",
            callback_data="admin_content"
        )],
        [InlineKeyboardButton(
            text="üì¢ –†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π",
            callback_data="admin_broadcast"
        )],
        [InlineKeyboardButton(
            text="üìã –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
            callback_data="admin_logs"
        )],
        [InlineKeyboardButton(
            text="üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–¥–º–∏–Ω–∫–∏",
            callback_data="admin_logout"
        )]
    ])
    return keyboard


def get_stats_menu() -> InlineKeyboardMarkup:
    """–ú–µ–Ω—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏."""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
            callback_data="stats_general"
        )],
        [InlineKeyboardButton(
            text="üë§ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
            callback_data="stats_users"
        )],
        [InlineKeyboardButton(
            text="üì± –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã",
            callback_data="stats_sections"
        )],
        [InlineKeyboardButton(
            text="üìÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–∞—Ç–∞–º",
            callback_data="stats_dates"
        )],
        [InlineKeyboardButton(
            text="üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel",
            callback_data="stats_export"
        )],
        [InlineKeyboardButton(
            text="‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –∞–¥–º–∏–Ω–∫–µ",
            callback_data="admin_panel"
        )]
    ])
    return keyboard


def get_users_menu() -> InlineKeyboardMarkup:
    """–ú–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏."""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="üìã –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
            callback_data="users_list"
        )],
        [InlineKeyboardButton(
            text="üîç –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
            callback_data="users_search"
        )],
        [InlineKeyboardButton(
            text="üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ",
            callback_data="users_blocked"
        )],
        [InlineKeyboardButton(
            text="‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ–≥–æ–¥–Ω—è",
            callback_data="users_active"
        )],
        [InlineKeyboardButton(
            text="üÜï –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",
            callback_data="users_new"
        )],
        [InlineKeyboardButton(
            text="‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –∞–¥–º–∏–Ω–∫–µ",
            callback_data="admin_panel"
        )]
    ])
    return keyboard


def get_user_actions(user_id: int, is_blocked: bool = False) -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–µ–π—Å—Ç–≤–∏–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º."""
    block_text = "‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å" if is_blocked else "üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"
    block_action = f"user_unblock_{user_id}" if is_blocked else f"user_block_{user_id}"
    
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
            callback_data=f"user_stats_{user_id}"
        )],
        [InlineKeyboardButton(
            text=block_text,
            callback_data=block_action
        )],
        [InlineKeyboardButton(
            text="üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ",
            callback_data=f"user_message_{user_id}"
        )],
        [InlineKeyboardButton(
            text="‚óÄÔ∏è –ö —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
            callback_data="users_list"
        )]
    ])
    return keyboard


def get_content_menu() -> InlineKeyboardMarkup:
    """–ú–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º."""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="üü¢ –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",
            callback_data="content_general"
        )],
        [InlineKeyboardButton(
            text="üî¥ –û—Ç–¥–µ–ª –ø—Ä–æ–¥–∞–∂",
            callback_data="content_sales"
        )],
        [InlineKeyboardButton(
            text="üü° –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –æ—Ç–¥–µ–ª",
            callback_data="content_sport"
        )],
        [InlineKeyboardButton(
            text="üìπ –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ",
            callback_data="content_upload_video"
        )],
        [InlineKeyboardButton(
            text="üìÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç",
            callback_data="content_upload_doc"
        )],
        [InlineKeyboardButton(
            text="‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –∞–¥–º–∏–Ω–∫–µ",
            callback_data="admin_panel"
        )]
    ])
    return keyboard


def get_content_section_menu(section: str) -> InlineKeyboardMarkup:
    """–ú–µ–Ω—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞."""
    sections_data = {
        "general": [
            ("üìç –ê–¥—Ä–µ—Å–∞ –ø–∞—Ä–∫–æ–≤", "general_addresses"),
            ("üìû –¢–µ–ª–µ—Ñ–æ–Ω—ã", "general_phones"),
            ("‚ö†Ô∏è –í–Ω–µ—à—Ç–∞—Ç–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏", "general_emergency"),
            ("üí∞ –ó–∞—Ä–ø–ª–∞—Ç–∞", "general_salary"),
            ("üìã –ü—Ä–∏–∫–∞–∑—ã", "general_orders"),
            ("üéÅ –°–∫–∏–¥–∫–∏", "general_discounts"),
        ],
        "sales": [
            ("üë• –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", "sales_general"),
            ("üè™ –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ", "sales_opening"),
            ("üí≥ –†–∞–±–æ—Ç–∞ —Å –∫–∞—Å—Å–æ–π", "sales_cash"),
            ("üìä –†–∞–±–æ—Ç–∞ —Å CRM", "sales_crm"),
            ("ü§ù –†–∞–±–æ—Ç–∞ —Å –≥–æ—Å—Ç—è–º–∏", "sales_guests"),
            ("‚ö†Ô∏è –ú–æ—à–µ–Ω–Ω–∏–∫–∏", "sales_scammers"),
        ],
        "sport": [
            ("üë• –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", "sport_general"),
            ("‚öôÔ∏è –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ", "sport_equipment"),
            ("üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å", "sport_safety"),
            ("üè• –¢—Ä–∞–≤–º—ã", "sport_injury"),
        ]
    }
    
    buttons = []
    for title, callback in sections_data.get(section, []):
        buttons.append([InlineKeyboardButton(
            text=title,
            callback_data=f"edit_{callback}"
        )])
    
    buttons.append([InlineKeyboardButton(
        text="‚óÄÔ∏è –ö —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º",
        callback_data="admin_content"
    )])
    
    keyboard = InlineKeyboardMarkup(inline_keyboard=buttons)
    return keyboard


def get_broadcast_menu() -> InlineKeyboardMarkup:
    """–ú–µ–Ω—é —Ä–∞—Å—Å—ã–ª–∫–∏."""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="üì¢ –í—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º",
            callback_data="broadcast_all"
        )],
        [InlineKeyboardButton(
            text="üî¥ –¢–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª—É –ø—Ä–æ–¥–∞–∂",
            callback_data="broadcast_sales"
        )],
        [InlineKeyboardButton(
            text="üü° –¢–æ–ª—å–∫–æ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–º—É –æ—Ç–¥–µ–ª—É",
            callback_data="broadcast_sport"
        )],
        [InlineKeyboardButton(
            text="‚úÖ –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–º",
            callback_data="broadcast_active"
        )],
        [InlineKeyboardButton(
            text="üìã –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫",
            callback_data="broadcast_history"
        )],
        [InlineKeyboardButton(
            text="‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –∞–¥–º–∏–Ω–∫–µ",
            callback_data="admin_panel"
        )]
    ])
    return keyboard


def get_broadcast_confirm(target: str, count: int) -> InlineKeyboardMarkup:
    """–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–∫–∏."""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text=f"‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å ({count} —á–µ–ª.)",
            callback_data=f"broadcast_send_{target}"
        )],
        [InlineKeyboardButton(
            text="‚ùå –û—Ç–º–µ–Ω–∏—Ç—å",
            callback_data="admin_broadcast"
        )]
    ])
    return keyboard


def get_back_to_admin() -> InlineKeyboardMarkup:
    """–ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –∞–¥–º–∏–Ω–∫—É."""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –∞–¥–º–∏–Ω–∫–µ",
            callback_data="admin_panel"
        )],
        [InlineKeyboardButton(
            text="üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
            callback_data="main_menu"
        )]
    ])
    return keyboard


def get_cancel_button() -> InlineKeyboardMarkup:
    """
    –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã —Ç–µ–∫—É—â–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

    –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ö–†–ò–¢–ò–ß–ï–°–ö–û–ô –û–®–ò–ë–ö–ò: –†–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è callback_data="admin_panel",
    —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫—É –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è, —Ç.–∫. –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ admin_panel
    –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç –≤ –¥–æ—Å—Ç—É–ø–µ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

    –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π callback_data="cancel_admin_action" —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º
    –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç FSM –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.
    """
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="üö´ –û—Ç–º–µ–Ω–∏—Ç—å",
            callback_data="cancel_admin_action"
        )]
    ])
    return keyboard


def get_edit_actions(section: str, key: str) -> InlineKeyboardMarkup:
    """–î–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞."""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç",
            callback_data=f"edit_text_{section}_{key}"
        )],
        [InlineKeyboardButton(
            text="üìπ –ó–∞–º–µ–Ω–∏—Ç—å –≤–∏–¥–µ–æ",
            callback_data=f"edit_video_{section}_{key}"
        )],
        [InlineKeyboardButton(
            text="üìÑ –ó–∞–º–µ–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç",
            callback_data=f"edit_doc_{section}_{key}"
        )],
        [InlineKeyboardButton(
            text="üóëÔ∏è –£–¥–∞–ª–∏—Ç—å",
            callback_data=f"edit_delete_{section}_{key}"
        )],
        [InlineKeyboardButton(
            text="‚óÄÔ∏è –ù–∞–∑–∞–¥",
            callback_data=f"content_{section}"
        )]
    ])
    return keyboard


def get_pagination_keyboard(
    current_page: int,
    total_pages: int,
    callback_prefix: str
) -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤."""
    buttons = []
    
    # –ù–∞–≤–∏–≥–∞—Ü–∏—è
    nav_row = []
    if current_page > 1:
        nav_row.append(InlineKeyboardButton(
            text="‚óÄÔ∏è –ù–∞–∑–∞–¥",
            callback_data=f"{callback_prefix}_page_{current_page - 1}"
        ))
    
    nav_row.append(InlineKeyboardButton(
        text=f"üìÑ {current_page}/{total_pages}",
        callback_data="page_info"
    ))
    
    if current_page < total_pages:
        nav_row.append(InlineKeyboardButton(
            text="–í–ø–µ—Ä–µ–¥ ‚ñ∂Ô∏è",
            callback_data=f"{callback_prefix}_page_{current_page + 1}"
        ))
    
    buttons.append(nav_row)
    
    # –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞
    buttons.append([InlineKeyboardButton(
        text="‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –∞–¥–º–∏–Ω–∫–µ",
        callback_data="admin_panel"
    )])
    
    keyboard = InlineKeyboardMarkup(inline_keyboard=buttons)
    return keyboard
