# Руководство по качественным Git коммитам

## Формат коммита
```
<тип>(<область>): краткое описание

Детальное описание изменений и их влияние.

Критерии приемки:
- [ ] выполнен критерий 1
- [ ] выполнен критерий 2
- [ ] выполнен критерий 3
```

## Типы коммитов

### feat (новая функциональность)
```
feat(middlewares): добавить улучшенное логирование ошибок

Реализован продвинутый middleware для логирования с поддержкой:
- Структурированного JSON логирования
- Корреляционных ID для отслеживания запросов
- Ротации логов по размеру
- Настраиваемых уровней логирования

Критерии приемки:
- [ ] Логирование работает для всех HTTP ошибок
- [ ] Включена корреляция запросов
- [ ] Поддерживается ротация файлов логов
- [ ] Добавлены unit тесты для middleware
```

### fix (исправление бага)
```
fix(database): исправить утечку соединений в connection pool

Проблема: Соединения с БД не закрывались корректно при ошибках.
Решение: Добавлен finally блок для гарантированного закрытия.

Критерии приемки:
- [ ] Все соединения закрываются после использования
- [ ] Нет утечек в тестах нагрузки
- [ ] Добавлены тесты для edge cases
```

### test (тестирование)
```
test(middlewares): расширить покрытие timeout middleware

Добавлены новые тест-кейсы:
- Тестирование timeout при высокой нагрузке
- Проверка graceful shutdown
- Тестирование кастомных timeout значений

Критерии приемки:
- [ ] Покрытие увеличено до 95%
- [ ] Все edge cases протестированы
- [ ] Добавлены performance тесты
```

### refactor (рефакторинг)
```
refactor(handlers): упростить логику обработки команд

Рефакторинг для улучшения читаемости:
- Разделение больших функций на меньшие
- Извлечение повторяющегося кода в утилиты
- Улучшение именования переменных

Критерии приемки:
- [ ] Функции короче 50 строк
- [ ] Нет дублирования кода
- [ ] Сохранена обратная совместимость
```

## Правила хороших коммитов

### ✅ Делать:
- Использовать настоящее время ("добавить", а не "добавил")
- Быть конкретным и описывать ЧТО и ПОЧЕМУ
- Включать контекст и влияние изменений
- Указывать области изменения в скобках
- Добавлять критерии приемки для сложных изменений

### ❌ Не делать:
- Использовать общие фразы ("исправил баги", "улучшил код")
- Писать слишком длинные описания (>72 символов в первой строке)
- Включать множественные несвязанные изменения
- Использовать неформальные выражения

## Примеры плохих vs хороших коммитов

### ❌ Плохо:
```
fix bug
update code  
improvements
stuff
```

### ✅ Хорошо:
```
feat(middlewares): добавить timeout обработку для heavy operations

Реализован timeout middleware с настраиваемыми параметрами
для предотвращения зависания бота при обработке тяжелых запросов.

Критерии приемки:
- [ ] Timeout настраивается через конфиг
- [ ] Graceful handling超时 ошибок
- [ ] Логирование превышений timeout
```

## Контрольный список перед коммитом
- [ ] Коммит следует формату `<тип>(<область>): описание`
- [ ] Описание понятное и конкретное
- [ ] Изменения логически связаны (один коммит = одна задача)
- [ ] Код проходит все тесты
- [ ] Добавлены тесты для новой функциональности
- [ ] Обновлена документация при необходимости
- [ ] Удален debug код и комментарии